!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).FindMyWay=t()}}((function(){return function t(e,r,n){function s(o,a){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(i)return i(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[o]={exports:{}};e[o][0].call(l.exports,(function(t){return s(e[o][1][t]||t)}),l,l.exports,t,e,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,r){"use strict";e.exports=function(t,e){if(!t)throw new Error(e);return!0}},{}],2:[function(t,e,r){"use strict";const n=t("./handler_storage"),s={STATIC:0,PARAMETRIC:1,WILDCARD:2};class i{constructor(){this.handlerStorage=new n}}class o extends i{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(t,e){const r=this.staticChildren[t.charAt(e)];return void 0!==r&&r.matchPrefix(t,e)?r:null}createStaticChild(t){if(0===t.length)return this;let e=this.staticChildren[t.charAt(0)];if(e){let r=1;for(;r<e.prefix.length;r++)if(t.charCodeAt(r)!==e.prefix.charCodeAt(r)){e=e.split(this,r);break}return e.createStaticChild(t.slice(r))}const r=t.charAt(0);return this.staticChildren[r]=new a(t),this.staticChildren[r]}}class a extends o{constructor(t){super(),this.prefix=t,this.wildcardChild=null,this.parametricChildren=[],this.kind=s.STATIC,this._compilePrefixMatch()}createParametricChild(t,e){const r=t&&t.source;let n=this.parametricChildren.find((t=>(t.regex&&t.regex.source)===r));return n||(n=new c(t,e),this.parametricChildren.push(n),this.parametricChildren.sort(((t,e)=>t.isRegex?e.isRegex?null===t.staticSuffix?1:null===e.staticSuffix?-1:e.staticSuffix.endsWith(t.staticSuffix)?1:t.staticSuffix.endsWith(e.staticSuffix)?-1:0:-1:1)),n)}createWildcardChild(){return this.wildcardChild||(this.wildcardChild=new h),this.wildcardChild}split(t,e){const r=this.prefix.slice(0,e),n=this.prefix.slice(e);this.prefix=n,this._compilePrefixMatch();const s=new a(r);return s.staticChildren[n.charAt(0)]=this,t.staticChildren[r.charAt(0)]=s,s}getNextNode(t,e,r,n){let s=this.findStaticMatchingChild(t,e),i=0;if(null===s){if(0===this.parametricChildren.length)return this.wildcardChild;s=this.parametricChildren[0],i=1}null!==this.wildcardChild&&r.push({paramsCount:n,brotherPathIndex:e,brotherNode:this.wildcardChild});for(let t=this.parametricChildren.length-1;t>=i;t--)r.push({paramsCount:n,brotherPathIndex:e,brotherNode:this.parametricChildren[t]});return s}_compilePrefixMatch(){if(1===this.prefix.length)return void(this.matchPrefix=()=>!0);const t=[];for(let e=1;e<this.prefix.length;e++){const r=this.prefix.charCodeAt(e);t.push(`path.charCodeAt(i + ${e}) === ${r}`)}this.matchPrefix=new Function("path","i",`return ${t.join(" && ")}`)}}class c extends o{constructor(t,e){super(),this.isRegex=!!t,this.regex=t||null,this.staticSuffix=e||null,this.kind=s.PARAMETRIC}getNextNode(t,e){return this.findStaticMatchingChild(t,e)}}class h extends i{constructor(){super(),this.kind=s.WILDCARD}getNextNode(){return null}}e.exports={StaticNode:a,ParametricNode:c,WildcardNode:h,NODE_TYPES:s}},{"./handler_storage":3}],3:[function(t,e,r){"use strict";e.exports=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(t){return void 0===t?this.unconstrainedHandler:this._getHandlerMatchingConstraints(t)}addHandler(t,e,r,n,s){const i={handler:t,params:e,constraints:s,store:r||null,_createParamsObject:this._compileCreateParamsObject(e)};0===Object.keys(s).length&&(this.unconstrainedHandler=i);for(const t of Object.keys(s))this.constraints.includes(t)||("version"===t?this.constraints.unshift(t):this.constraints.push(t));if(this.handlers.length>=32)throw new Error("find-my-way supports a maximum of 32 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort(((t,e)=>Object.keys(t.constraints).length-Object.keys(e.constraints).length)),this._compileGetHandlerMatchingConstraints(n,s)}_compileCreateParamsObject(t){const e=[];for(let r=0;r<t.length;r++)e.push(`'${t[r]}': paramsArray[${r}]`);return new Function("paramsArray",`return {${e.join(",")}}`)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(t,e){for(let r=0;r<this.handlers.length;r++){const n=this.handlers[r].constraints[e];if(void 0!==n){let e=t.get(n)||0;e|=1<<r,t.set(n,e)}}}_constrainedIndexBitmask(t){let e=0;for(let r=0;r<this.handlers.length;r++){void 0!==this.handlers[r].constraints[t]&&(e|=1<<r)}return~e}_compileGetHandlerMatchingConstraints(t){this.constrainedHandlerStores={};for(const e of this.constraints){const r=t.newStoreForConstraint(e);this.constrainedHandlerStores[e]=r,this._buildConstraintStore(r,e)}const e=[];e.push(`\n    let candidates = ${(1<<this.handlers.length)-1}\n    let mask, matches\n    `);for(const r of this.constraints){e.push(`\n      mask = ${this._constrainedIndexBitmask(r)}\n      value = derivedConstraints.${r}\n      `);const n=t.strategies[r].mustMatchWhenDerived?"matches":"(matches | mask)";e.push(`\n      if (value === undefined) {\n        candidates &= mask\n      } else {\n        matches = this.constrainedHandlerStores.${r}.get(value) || 0\n        candidates &= ${n}\n      }\n      if (candidates === 0) return null;\n      `)}for(const r in t.strategies){t.strategies[r].mustMatchWhenDerived&&!this.constraints.includes(r)&&e.push(`if (derivedConstraints.${r} !== undefined) return null`)}e.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",e.join("\n"))}}},{}],4:[function(t,e,r){"use strict";const n=t("./assert-mock.js"),s=t("fast-querystring"),i=t("safe-regex2"),o=t("fast-deep-equal"),{flattenNode:a,compressFlattenedNode:c,prettyPrintFlattenedNode:h,prettyPrintRoutesArray:l}=t("./lib/pretty-print"),{StaticNode:u,NODE_TYPES:d}=t("./custom_node"),f=t("./lib/constrainer"),p=t("./lib/http-methods"),{safeDecodeURI:g,safeDecodeURIComponent:y}=t("./lib/url-sanitizer"),m=/^https?:\/\/.*?\//,C=/(\/:[^/()]*?)\?(\/?)/;if(!i(m))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!i(C))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");function x(t){if(!(this instanceof x))return new x(t);(t=t||{}).defaultRoute?(n("function"==typeof t.defaultRoute,"The default route must be a function"),this.defaultRoute=t.defaultRoute):this.defaultRoute=null,t.onBadUrl?(n("function"==typeof t.onBadUrl,"The bad url handler must be a function"),this.onBadUrl=t.onBadUrl):this.onBadUrl=null,t.buildPrettyMeta?(n("function"==typeof t.buildPrettyMeta,"buildPrettyMeta must be a function"),this.buildPrettyMeta=t.buildPrettyMeta):this.buildPrettyMeta=E,t.querystringParser?(n("function"==typeof t.querystringParser,"querystringParser must be a function"),this.querystringParser=t.querystringParser):this.querystringParser=t=>""===t?{}:s.parse(t),this.caseSensitive=void 0===t.caseSensitive||t.caseSensitive,this.ignoreTrailingSlash=t.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=t.ignoreDuplicateSlashes||!1,this.maxParamLength=t.maxParamLength||100,this.allowUnsafeRegex=t.allowUnsafeRegex||!1,this.routes=[],this.trees={},this.constrainer=new f(t.constraints),this._routesPatterns={}}for(var v in x.prototype.on=function(t,e,r,s,i){"function"==typeof r&&(void 0!==s&&(i=s),s=r,r={}),n("string"==typeof e,"Path should be a string"),n(e.length>0,"The path could not be empty"),n("/"===e[0]||"*"===e[0],"The first character of a path should be `/` or `*`"),n("function"==typeof s,"Handler should be a function");const o=e.match(C);if(o){n(e.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");const a=e.replace(C,"$1$2"),c=e.replace(C,"$2");return this.on(t,a,r,s,i),void this.on(t,c,r,s,i)}const a=e;this.ignoreDuplicateSlashes&&(e=b(e)),this.ignoreTrailingSlash&&(e=A(e));const c=Array.isArray(t)?t:[t];for(const t of c)this._on(t,e,r,s,i,a),this.routes.push({method:t,path:e,opts:r,handler:s,store:i})},x.prototype._on=function(t,e,r,s,a){n("string"==typeof t,"Method should be a string"),n(p.includes(t),`Method '${t}' is not an http method.`);let c={};if(void 0!==r.constraints&&(n("object"==typeof r.constraints&&null!==r.constraints,"Constraints should be an object"),0!==Object.keys(r.constraints).length&&(c=r.constraints)),this.constrainer.validateConstraints(c),this.constrainer.noteUsage(c),void 0===this.trees[t]&&(this.trees[t]=new u("/"),this._routesPatterns[t]=[]),"*"===e&&0!==this.trees[t].prefix.length){const e=this.trees[t];this.trees[t]=new u(""),this.trees[t].staticChildren["/"]=e}let h=this.trees[t],l=h.prefix.length;const d=[];for(let t=0;t<=e.length;t++){if(58===e.charCodeAt(t)&&58===e.charCodeAt(t+1)){t++;continue}const r=58===e.charCodeAt(t)&&58!==e.charCodeAt(t+1),s=42===e.charCodeAt(t);if(r||s||t===e.length&&t!==l){let r=e.slice(l,t);this.caseSensitive||(r=r.toLowerCase()),r=r.split("::").join(":"),r=r.split("%").join("%25"),h=h.createStaticChild(r)}if(r){let r=!1;const s=[];let o=t+1;for(let a=o;;a++){const c=e.charCodeAt(a),u=40===c,f=45===c||46===c,p=47===c||a===e.length;if(u||f||p){const c=e.slice(o,a);if(d.push(c),r=r||u||f,u){const t=w(e,a),r=e.slice(a,t+1);this.allowUnsafeRegex||n(i(new RegExp(r)),`The regex '${r}' is not safe!`),s.push(S(r)),a=t+1}else s.push("(.*?)");const g=a;for(;a<e.length;a++){const t=e.charCodeAt(a);if(47===t)break;if(58===t){if(58!==e.charCodeAt(a+1))break;a++}}let y=e.slice(g,a);if(y&&(y=y.split("::").join(":"),y=y.split("%").join("%25"),s.push(y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))),o=a+1,p||47===e.charCodeAt(a)||a===e.length){const n=r?"()"+y:y;e=e.slice(0,t+1)+n+e.slice(a),t+=n.length;const i=r?new RegExp("^"+s.join("")+"$"):null;h=h.createParametricChild(i,y||null),l=t+1;break}}}}else if(s&&(d.push("*"),h=h.createWildcardChild(),l=t+1,t!==e.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(e=e.toLowerCase()),"*"===e&&(e="/*");for(const r of this._routesPatterns[t])if(r.path===e&&o(r.constraints,c))throw new Error(`Method '${t}' already declared for route '${e}' with constraints '${JSON.stringify(c)}'`);this._routesPatterns[t].push({path:e,params:d,constraints:c}),h.handlerStorage.addHandler(s,d,a,this.constrainer,c)},x.prototype.hasConstraintStrategy=function(t){return this.constrainer.hasConstraintStrategy(t)},x.prototype.addConstraintStrategy=function(t){this.constrainer.addConstraintStrategy(t),this._rebuild(this.routes)},x.prototype.reset=function(){this.trees={},this.routes=[],this._routesPatterns={}},x.prototype.off=function(t,e,r){n("string"==typeof e,"Path should be a string"),n(e.length>0,"The path could not be empty"),n("/"===e[0]||"*"===e[0],"The first character of a path should be `/` or `*`"),n(void 0===r||"object"==typeof r&&!Array.isArray(r)&&null!==r,"Constraints should be an object or undefined.");const s=e.match(C);if(s){n(e.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");const i=e.replace(C,"$1$2"),o=e.replace(C,"$2");return this.off(t,i,r),void this.off(t,o,r)}this.ignoreDuplicateSlashes&&(e=b(e)),this.ignoreTrailingSlash&&(e=A(e));const i=Array.isArray(t)?t:[t];for(const t of i)this._off(t,e,r)},x.prototype._off=function(t,e,r){function s(r){return t!==r.method||e!==r.path}n("string"==typeof t,"Method should be a string"),n(p.includes(t),`Method '${t}' is not an http method.`);const i=r?function(t){return s(t)||!o(r,t.opts.constraints||{})}:s,a=this.routes.filter(i);this._rebuild(a)},x.prototype.lookup=function(t,e,r,n){if("function"==typeof r&&(n=r,r=void 0),void 0===n){const n=this.constrainer.deriveConstraints(t,r),s=this.find(t.method,t.url,n);return this.callHandler(s,t,e,r)}this.constrainer.deriveConstraints(t,r,((s,i)=>{if(null===s)try{const s=this.find(t.method,t.url,i),o=this.callHandler(s,t,e,r);n(null,o)}catch(s){n(s)}else n(s)}))},x.prototype.callHandler=function(t,e,r,n){return null===t?this._defaultRoute(e,r,n):void 0===n?t.handler(e,r,t.params,t.store,t.searchParams):t.handler.call(n,e,r,t.params,t.store,t.searchParams)},x.prototype.find=function(t,e,r){let n,s,i,o=this.trees[t];if(void 0===o)return null;47!==e.charCodeAt(0)&&(e=e.replace(m,"/")),this.ignoreDuplicateSlashes&&(e=b(e));try{n=g(e),e=n.path,s=n.querystring,i=n.shouldDecodeParam}catch(t){return this._onBadUrl(e)}this.ignoreTrailingSlash&&(e=A(e));const a=e;!1===this.caseSensitive&&(e=e.toLowerCase());const c=this.maxParamLength;let h=o.prefix.length;const l=[],u=e.length,f=[];for(;;){if(h===u){const t=o.handlerStorage.getMatchingHandler(r);if(null!==t)return{handler:t.handler,store:t.store,params:t._createParamsObject(l),searchParams:this.querystringParser(s)}}let t=o.getNextNode(e,h,f,l.length);if(null===t){if(0===f.length)return null;const e=f.pop();h=e.brotherPathIndex,l.splice(e.paramsCount),t=e.brotherNode}if(o=t,o.kind!==d.STATIC)if(o.kind!==d.WILDCARD){if(o.kind===d.PARAMETRIC){let t=a.indexOf("/",h);-1===t&&(t=u);let e=a.slice(h,t);if(i&&(e=y(e)),o.isRegex){const t=o.regex.exec(e);if(null===t)continue;for(let e=1;e<t.length;e++){const r=t[e];if(r.length>c)return null;l.push(r)}}else{if(e.length>c)return null;l.push(e)}h=t}}else{let t=a.slice(h);i&&(t=y(t)),l.push(t),h=u}else h+=o.prefix.length}},x.prototype._rebuild=function(t){this.reset();for(const e of t){const{method:t,path:r,opts:n,handler:s,store:i}=e;this._on(t,r,n,s,i),this.routes.push({method:t,path:r,opts:n,handler:s,store:i})}},x.prototype._defaultRoute=function(t,e,r){if(null!==this.defaultRoute)return void 0===r?this.defaultRoute(t,e):this.defaultRoute.call(r,t,e);e.statusCode=404,e.end()},x.prototype._onBadUrl=function(t){if(null===this.onBadUrl)return null;const e=this.onBadUrl;return{handler:(r,n,s)=>e(t,r,n),params:{},store:null}},x.prototype.prettyPrint=function(t={}){if(t.commonPrefix=void 0===t.commonPrefix||t.commonPrefix,!t.commonPrefix)return l.call(this,this.routes,t);const e={prefix:"/",nodes:[],children:{}};for(const t in this.trees){const r=this.trees[t];r&&a(e,r,t)}return c(e),h.call(this,e,"",!0,t)},p){if(!p.hasOwnProperty(v))continue;const t=p[v],e=t.toLowerCase();if(x.prototype[e])throw new Error("Method already exists: "+e);x.prototype[e]=function(e,r,n){return this.on(t,e,r,n)}}function b(t){return t.replace(/\/\/+/g,"/")}function A(t){return t.length>1&&47===t.charCodeAt(t.length-1)?t.slice(0,-1):t}function S(t){return 94===t.charCodeAt(1)&&(t=t.slice(0,1)+t.slice(2)),36===t.charCodeAt(t.length-2)&&(t=t.slice(0,t.length-2)+t.slice(t.length-1)),t}function w(t,e){for(var r=1;e<t.length;)if("\\"!==t[++e]){if(")"===t[e]?r--:"("===t[e]&&r++,!r)return e}else e++;throw new TypeError('Invalid regexp expression in "'+t+'"')}function E(t){return t&&t.store?Object.assign({},t.store):{}}x.prototype.all=function(t,e,r){this.on(p,t,e,r)},e.exports=x},{"./assert-mock.js":1,"./custom_node":2,"./lib/constrainer":5,"./lib/http-methods":6,"./lib/pretty-print":7,"./lib/url-sanitizer":10,"fast-deep-equal":12,"fast-querystring":13,"safe-regex2":22}],5:[function(t,e,r){"use strict";const n=t("./strategies/accept-version"),s=t("./strategies/accept-host"),i=t("../assert-mock.js");e.exports=class{constructor(t){if(this.strategies={version:n,host:s},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,t)for(const e of Object.values(t))this.addConstraintStrategy(e)}isStrategyUsed(t){return this.strategiesInUse.has(t)||this.asyncStrategiesInUse.has(t)}hasConstraintStrategy(t){const e=this.strategies[t];return void 0!==e&&(e.isCustom||this.isStrategyUsed(t))}addConstraintStrategy(t){if(i("string"==typeof t.name&&""!==t.name,"strategy.name is required."),i(t.storage&&"function"==typeof t.storage,"strategy.storage function is required."),i(t.deriveConstraint&&"function"==typeof t.deriveConstraint,"strategy.deriveConstraint function is required."),this.strategies[t.name]&&this.strategies[t.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${t.name}.`);if(this.isStrategyUsed(t.name))throw new Error(`There already exists a route with ${t.name} constraint.`);t.isCustom=!0,t.isAsync=3===t.deriveConstraint.length,this.strategies[t.name]=t,t.mustMatchWhenDerived&&this.noteUsage({[t.name]:t})}deriveConstraints(t,e,r){const n=this.deriveSyncConstraints(t,e);if(void 0===r)return n;this.deriveAsyncConstraints(n,t,e,r)}deriveSyncConstraints(t,e){}noteUsage(t){if(t){const e=this.strategiesInUse.size;for(const e in t){this.strategies[e].isAsync?this.asyncStrategiesInUse.add(e):this.strategiesInUse.add(e)}e!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(t){if(!this.strategies[t])throw new Error(`No strategy registered for constraint key ${t}`);return this.strategies[t].storage()}validateConstraints(t){for(const e in t){const r=t[e];if(void 0===r)throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");const n=this.strategies[e];if(!n)throw new Error(`No strategy registered for constraint key ${e}`);n.validate&&n.validate(r)}}deriveAsyncConstraints(t,e,r,n){let s=this.asyncStrategiesInUse.size;if(0!==s){t=t||{};for(const i of this.asyncStrategiesInUse){this.strategies[i].deriveConstraint(e,r,((e,r)=>{null===e?(t[i]=r,0==--s&&n(null,t)):n(e)}))}}else n(null,t)}_buildDeriveConstraints(){if(0===this.strategiesInUse.size)return;const t=["return {"];for(const e of this.strategiesInUse){const r=this.strategies[e];if(r.isCustom)t.push(`  ${r.name}: this.strategies.${e}.deriveConstraint(req, ctx),`);else if("version"===e)t.push("   version: req.headers['accept-version'],");else{if("host"!==e)throw new Error("unknown non-custom strategy for compiling constraint derivation function");t.push("   host: req.headers.host || req.headers[':authority'],")}}t.push("}"),this.deriveSyncConstraints=new Function("req","ctx",t.join("\n")).bind(this)}}},{"../assert-mock.js":1,"./strategies/accept-host":8,"./strategies/accept-version":9}],6:[function(t,e,r){"use strict";e.exports=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"]},{}],7:[function(t,e,r){"use strict";const n="    ",s="│   ",i="├── ",o="└── ",a="*",c="/",h=/(?=\/)/;function l(t){return Array.isArray(t)?t.map((t=>l(t))):"symbol"==typeof t?t.toString():"function"==typeof t?function(t){let e=t.name||"";return e=e.replace("bound","").trim(),e=(e||"anonymous")+"()",e}(t):t}function u(t,e){const r={},n=this.buildPrettyMeta(t);return Array.isArray(e)||(e=n?Reflect.ownKeys(n):[]),e.forEach((t=>{const e="symbol"==typeof t?t.toString():t;n&&n[t]&&(r[e]=l(n[t]))})),r}function d(t,e,r,a,c){let h="";if(a||c||(h+="\n"),a||(h+=`${e||""}${r?o:i}`),h+=`${t.path}`,t.handlers){const i=t.handlers.reduce(((t,e)=>{const r=t.findIndex((t=>JSON.stringify(t.opts)===JSON.stringify(e.opts)));return-1!==r?t[r].method=[t[r].method,e.method].join(", "):t.push(e),t}),[]);i.forEach(((o,c)=>{c>0&&(h+=`${a?"":e||""}${r?n:s}${t.path}`),h+=` (${o.method||"-"})`,o.opts&&"{}"!==JSON.stringify(o.opts)&&(h+=` ${JSON.stringify(o.opts)}`),o.meta&&Reflect.ownKeys(o.meta).forEach(((t,i)=>{h+=`\n${a?"":e||""}${r?n:s}`,h+=`• (${t}) ${JSON.stringify(o.meta[t])}`})),i.length>1&&c!==i.length-1&&(h+="\n")}))}else t.children.length>1&&(h+=" (-)");return a||(e=`${e||""}${r?n:s}`),t.children.forEach(((r,n)=>{const s=n===t.children.length-1,i=!t.handlers&&1===t.children.length;h+=d(r,e,s,i)})),h}e.exports={flattenNode:function t(e,r,n){if(0!==r.handlerStorage.handlers.length&&e.nodes.push({method:n,node:r}),r.parametricChildren&&r.parametricChildren[0]&&(e.children[":"]||(e.children[":"]={prefix:":",nodes:[],children:{}}),t(e.children[":"],r.parametricChildren[0],n)),r.wildcardChild&&(e.children["*"]||(e.children["*"]={prefix:"*",nodes:[],children:{}}),t(e.children["*"],r.wildcardChild,n)),r.staticChildren)for(const s of Object.values(r.staticChildren)){const r=s.prefix.split(h);let i,o=e;for(const t of r)i=o,o=o.children[t],o||(o={prefix:t,nodes:[],children:{}},i.children[t]=o);t(o,s,n)}},compressFlattenedNode:function t(e){const r=Object.keys(e.children);if(0===e.nodes.length&&1===r.length){const n=e.children[r[0]];if(n.nodes.length<=1)return t(n),e.nodes=n.nodes,e.prefix+=n.prefix,e.children=n.children,e}for(const r of Object.keys(e.children))t(e.children[r]);return e},prettyPrintFlattenedNode:function t(e,r,a,c){if(!this.buildPrettyMeta)throw new Error("buildPrettyMeta not defined");c.includeMeta=c.includeMeta||null;let h="";const l=[];for(const{node:t,method:r}of e.nodes)for(const e of t.handlerStorage.handlers)l.push({method:r,...e});l.length?l.forEach(((t,i)=>{let o=`(${t.method||"-"})`;Object.keys(t.constraints).length>0&&(o+=" "+JSON.stringify(t.constraints));let l="";const d=e.prefix.split("").map(((t,e)=>":"===t?e:null)).filter((t=>null!==t));if(d.length){let r=0;d.forEach(((n,s)=>{l+=e.prefix.slice(r,n+1),l+=t.params[t.params.length-d.length+s],s===d.length-1&&(l+=e.prefix.slice(n+1)),r=n+1}))}else l=e.prefix;if(h+=0===i?`${l} ${o}`:`\n${r}${a?n:s}${l} ${o}`,c.includeMeta){const e=u.call(this,t,c.includeMeta);Object.keys(e).forEach(((t,i)=>{h+=`\n${r||""}${a?n:s}`,h+=`• (${t}) ${JSON.stringify(e[t])}`}))}})):h=e.prefix;let d=`${r}${a?o:i}${h}\n`;r=`${r}${a?n:s}`;const f=Object.keys(e.children);for(let n=0;n<f.length;n++){const s=e.children[f[n]];d+=t.call(this,s,r,n===f.length-1,c)}return d},prettyPrintRoutesArray:function(t,e={}){if(!this.buildPrettyMeta)throw new Error("buildPrettyMeta not defined");e.includeMeta=e.includeMeta||null;const r=[];let n="";t.sort(((t,e)=>t.path&&e.path?t.path.localeCompare(e.path):0));for(let n=0;n<t.length;n++){const s=t[n],i=r.find((t=>s.path===t.path));if(i){i.handlers.push({method:s.method,opts:s.opts.constraints||void 0,meta:e.includeMeta?u.call(this,s,e.includeMeta):null});continue}const o={method:s.method,opts:s.opts.constraints||void 0,meta:e.includeMeta?u.call(this,s,e.includeMeta):null};r.push({path:s.path,methods:[s.method],opts:[s.opts],handlers:[o]})}if(!r.filter((t=>t.path===c)).length){const t={path:c,truncatedPath:"",methods:[],opts:[],handlers:[{}]};r.filter((t=>t.path===a)).length?r.splice(1,0,t):r.unshift(t)}const s=function(t){const e=[],r={result:e};return t.forEach(((t,e)=>{let n=t.path.split(h);n[0]!==c&&n[0]!==a&&(n=[c,n[0].slice(1),...n.slice(1)]),n.reduce(((e,r,s)=>{if(!e[r]){e[r]={result:[]};const i={path:r,children:e[r].result};s===n.length-1&&(i.handlers=t.handlers),e.result.push(i)}return e[r]}),r)})),e}(r);return s.forEach(((t,e)=>{n+=d(t,null,e===s.length-1,!1,!0),n+="\n"})),n}}},{}],8:[function(t,e,r){"use strict";const n=t("../../assert-mock.js");e.exports={name:"host",mustMatchWhenDerived:!1,storage:function(){const t={},e=[];return{get:r=>{const n=t[r];if(n)return n;for(const t of e)if(t.host.test(r))return t.value},set:(r,n)=>{r instanceof RegExp?e.push({host:r,value:n}):t[r]=n}}},validate(t){n("string"==typeof t||"[object RegExp]"===Object.prototype.toString.call(t),"Host should be a string or a RegExp")}}},{"../../assert-mock.js":1}],9:[function(t,e,r){"use strict";const n=t("../../assert-mock.js");function s(){if(!(this instanceof s))return new s;this.store={},this.maxMajor=0,this.maxMinors={},this.maxPatches={}}s.prototype.set=function(t,e){if("string"!=typeof t)throw new TypeError("Version should be a string");let[r,n,s]=t.split(".");return r=Number(r)||0,n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.x=e,this.store["*"]=e,this.store["x.x"]=e,this.store["x.x.x"]=e),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store[`${r}.x`]=e,this.store[`${r}.x.x`]=e),s>=(this.store[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store[`${r}.${n}.x`]=e),this.store[`${r}.${n}.${s}`]=e,this},s.prototype.get=function(t){return this.store[t]},e.exports={name:"version",mustMatchWhenDerived:!0,storage:s,validate(t){n("string"==typeof t,"Version should be a string")}}},{"../../assert-mock.js":1}],10:[function(t,e,r){"use strict";function n(t,e){return 50===t?53===e?"%":51===e?"#":52===e?"$":54===e?"&":66===e||98===e?"+":67===e||99===e?",":70===e||102===e?"/":null:51===t?65===e||97===e?":":66===e||98===e?";":68===e||100===e?"=":70===e||102===e?"?":null:52===t&&48===e?"@":null}e.exports={safeDecodeURI:function(t){let e=!1,r=!1,s="";for(let i=1;i<t.length;i++){const o=t.charCodeAt(i);if(37===o){const s=t.charCodeAt(i+1),o=t.charCodeAt(i+2);null===n(s,o)?e=!0:(r=!0,50===s&&53===o&&(e=!0,t=t.slice(0,i+1)+"25"+t.slice(i+1),i+=2),i+=2)}else if(63===o||59===o||35===o){s=t.slice(i+1),t=t.slice(0,i);break}}return{path:e?decodeURI(t):t,querystring:s,shouldDecodeParam:r}},safeDecodeURIComponent:function(t){const e=t.indexOf("%");if(-1===e)return t;let r="",s=e;for(let i=e;i<t.length;i++)if(37===t.charCodeAt(i)){const e=n(t.charCodeAt(i+1),t.charCodeAt(i+2));r+=t.slice(s,i)+e,s=i+3}return t.slice(0,e)+r+t.slice(s)}}},{}],11:[function(t,e,r){"use strict";var n=12,s=0,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];var o={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function a(t,e){var r=o[t];return void 0===r?255:r<<e}e.exports=function(t){var e=t.indexOf("%");if(-1===e)return t;for(var r=t.length,o="",c=0,h=0,l=e,u=n;e>-1&&e<r;){var d=a(t[e+1],4)|a(t[e+2],0),f=i[d];if(u=i[256+u+f],h=h<<6|d&i[364+f],u!==n){if(u===s)return null;if((e+=3)<r&&37===t.charCodeAt(e))continue;return null}o+=t.slice(c,l),o+=h<=65535?String.fromCharCode(h):String.fromCharCode(55232+(h>>10),56320+(1023&h)),h=0,c=e+3,e=l=t.indexOf("%",c)}return o+t.slice(c)}},{}],12:[function(t,e,r){"use strict";e.exports=function t(e,r){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if((n=e.length)!=r.length)return!1;for(s=n;0!=s--;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if((n=(i=Object.keys(e)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;0!=s--;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!=e&&r!=r}},{}],13:[function(t,e,r){"use strict";const n=t("./parse"),s=t("./stringify"),i={parse:n,stringify:s};e.exports=i,e.exports.default=i,e.exports.parse=n,e.exports.stringify=s},{"./parse":15,"./stringify":16}],14:[function(t,e,r){const n=Array.from({length:256},((t,e)=>"%"+((e<16?"0":"")+e.toString(16)).toUpperCase())),s=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);e.exports={encodeString:function(t){const e=t.length;if(0===e)return"";let r="",i=0,o=0;t:for(;o<e;o++){let a=t.charCodeAt(o);for(;a<128;){if(1!==s[a]&&(i<o&&(r+=t.slice(i,o)),i=o+1,r+=n[a]),++o===e)break t;a=t.charCodeAt(o)}if(i<o&&(r+=t.slice(i,o)),a<2048){i=o+1,r+=n[192|a>>6]+n[128|63&a];continue}if(a<55296||a>=57344){i=o+1,r+=n[224|a>>12]+n[128|a>>6&63]+n[128|63&a];continue}if(++o,o>=e)throw new Error("URI malformed");i=o+1,a=65536+((1023&a)<<10|1023&t.charCodeAt(o)),r+=n[240|a>>18]+n[128|a>>12&63]+n[128|a>>6&63]+n[128|63&a]}return 0===i?t:i<e?r+t.slice(i):r}}},{}],15:[function(t,e,r){"use strict";const n=t("fast-decode-uri-component"),s=/\+/g,i=function(){};i.prototype=Object.create(null),e.exports=function(t){const e=new i;if("string"!=typeof t)return e;let r=t.length,o="",a="",c=-1,h=-1,l=!1,u=!1,d=!1,f=!1,p=!1,g=0;for(let i=0;i<r+1;i++)if(g=i!==r?t.charCodeAt(i):38,38===g){if(p=h>c,p||(h=i),o=t.slice(c+1,h),p||o.length>0){d&&(o=o.replace(s," ")),l&&(o=n(o)||o),p&&(a=t.slice(h+1,i),f&&(a=a.replace(s," ")),u&&(a=n(a)||a));const r=e[o];void 0===r?e[o]=a:r.pop?r.push(a):e[o]=[r,a]}a="",c=i,h=i,l=!1,u=!1,d=!1,f=!1}else 61===g?h<=c?h=i:u=!0:43===g?h>c?f=!0:d=!0:37===g&&(h>c?u=!0:l=!0);return e}},{"fast-decode-uri-component":11}],16:[function(t,e,r){"use strict";const{encodeString:n}=t("./internals/querystring");function s(t){const e=typeof t;return"string"===e?n(t):"bigint"===e?t.toString():"boolean"===e?t?"true":"false":"number"===e&&Number.isFinite(t)?t<1e21?""+t:n(""+t):""}e.exports=function(t){let e="";if(null===t||"object"!=typeof t)return e;const r=Object.keys(t),i=r.length;let o=0;for(let a=0;a<i;a++){const i=r[a],c=t[i],h=n(i)+"=";if(a&&(e+="&"),Array.isArray(c)){o=c.length;for(let t=0;t<o;t++)t&&(e+="&"),e+=h,e+=s(c[t])}else e+=h,e+=s(c)}return e}},{"./internals/querystring":14}],17:[function(t,e,r){const n=t("./util"),s=t("./types"),i=t("./sets"),o=t("./positions");e.exports=t=>{var e,r,a=0,c={type:s.ROOT,stack:[]},h=c,l=c.stack,u=[],d=e=>{n.error(t,"Nothing to repeat at column "+(e-1))},f=n.strToChars(t);for(e=f.length;a<e;)switch(r=f[a++]){case"\\":switch(r=f[a++]){case"b":l.push(o.wordBoundary());break;case"B":l.push(o.nonWordBoundary());break;case"w":l.push(i.words());break;case"W":l.push(i.notWords());break;case"d":l.push(i.ints());break;case"D":l.push(i.notInts());break;case"s":l.push(i.whitespace());break;case"S":l.push(i.notWhitespace());break;default:/\d/.test(r)?l.push({type:s.REFERENCE,value:parseInt(r,10)}):l.push({type:s.CHAR,value:r.charCodeAt(0)})}break;case"^":l.push(o.begin());break;case"$":l.push(o.end());break;case"[":var p;"^"===f[a]?(p=!0,a++):p=!1;var g=n.tokenizeClass(f.slice(a),t);a+=g[1],l.push({type:s.SET,set:g[0],not:p});break;case".":l.push(i.anyChar());break;case"(":var y={type:s.GROUP,stack:[],remember:!0};"?"===(r=f[a])&&(r=f[a+1],a+=2,"="===r?y.followedBy=!0:"!"===r?y.notFollowedBy=!0:":"!==r&&n.error(t,`Invalid group, character '${r}' after '?' at column `+(a-1)),y.remember=!1),l.push(y),u.push(h),h=y,l=y.stack;break;case")":0===u.length&&n.error(t,"Unmatched ) at column "+(a-1)),l=(h=u.pop()).options?h.options[h.options.length-1]:h.stack;break;case"|":h.options||(h.options=[h.stack],delete h.stack);var m=[];h.options.push(m),l=m;break;case"{":var C,x,v=/^(\d+)(,(\d+)?)?\}/.exec(f.slice(a));null!==v?(0===l.length&&d(a),C=parseInt(v[1],10),x=v[2]?v[3]?parseInt(v[3],10):1/0:C,a+=v[0].length,l.push({type:s.REPETITION,min:C,max:x,value:l.pop()})):l.push({type:s.CHAR,value:123});break;case"?":0===l.length&&d(a),l.push({type:s.REPETITION,min:0,max:1,value:l.pop()});break;case"+":0===l.length&&d(a),l.push({type:s.REPETITION,min:1,max:1/0,value:l.pop()});break;case"*":0===l.length&&d(a),l.push({type:s.REPETITION,min:0,max:1/0,value:l.pop()});break;default:l.push({type:s.CHAR,value:r.charCodeAt(0)})}return 0!==u.length&&n.error(t,"Unterminated group"),c},e.exports.types=s},{"./positions":18,"./sets":19,"./types":20,"./util":21}],18:[function(t,e,r){const n=t("./types");r.wordBoundary=()=>({type:n.POSITION,value:"b"}),r.nonWordBoundary=()=>({type:n.POSITION,value:"B"}),r.begin=()=>({type:n.POSITION,value:"^"}),r.end=()=>({type:n.POSITION,value:"$"})},{"./types":20}],19:[function(t,e,r){const n=t("./types"),s=()=>[{type:n.RANGE,from:48,to:57}],i=()=>[{type:n.CHAR,value:95},{type:n.RANGE,from:97,to:122},{type:n.RANGE,from:65,to:90}].concat(s()),o=()=>[{type:n.CHAR,value:9},{type:n.CHAR,value:10},{type:n.CHAR,value:11},{type:n.CHAR,value:12},{type:n.CHAR,value:13},{type:n.CHAR,value:32},{type:n.CHAR,value:160},{type:n.CHAR,value:5760},{type:n.RANGE,from:8192,to:8202},{type:n.CHAR,value:8232},{type:n.CHAR,value:8233},{type:n.CHAR,value:8239},{type:n.CHAR,value:8287},{type:n.CHAR,value:12288},{type:n.CHAR,value:65279}];r.words=()=>({type:n.SET,set:i(),not:!1}),r.notWords=()=>({type:n.SET,set:i(),not:!0}),r.ints=()=>({type:n.SET,set:s(),not:!1}),r.notInts=()=>({type:n.SET,set:s(),not:!0}),r.whitespace=()=>({type:n.SET,set:o(),not:!1}),r.notWhitespace=()=>({type:n.SET,set:o(),not:!0}),r.anyChar=()=>({type:n.SET,set:[{type:n.CHAR,value:10},{type:n.CHAR,value:13},{type:n.CHAR,value:8232},{type:n.CHAR,value:8233}],not:!0})},{"./types":20}],20:[function(t,e,r){e.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}},{}],21:[function(t,e,r){const n=t("./types"),s=t("./sets"),i={0:0,t:9,n:10,v:11,f:12,r:13};r.strToChars=function(t){return t=t.replace(/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g,(function(t,e,r,n,s,o,a,c){if(r)return t;var h=e?8:n?parseInt(n,16):s?parseInt(s,16):o?parseInt(o,8):a?"@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?".indexOf(a):i[c],l=String.fromCharCode(h);return/[[\]{}^$.|?*+()]/.test(l)&&(l="\\"+l),l}))},r.tokenizeClass=(t,e)=>{for(var i,o,a=[],c=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?([^])/g;null!=(i=c.exec(t));)if(i[1])a.push(s.words());else if(i[2])a.push(s.ints());else if(i[3])a.push(s.whitespace());else if(i[4])a.push(s.notWords());else if(i[5])a.push(s.notInts());else if(i[6])a.push(s.notWhitespace());else if(i[7])a.push({type:n.RANGE,from:(i[8]||i[9]).charCodeAt(0),to:i[10].charCodeAt(0)});else{if(!(o=i[12]))return[a,c.lastIndex];a.push({type:n.CHAR,value:o.charCodeAt(0)})}r.error(e,"Unterminated character class")},r.error=(t,e)=>{throw new SyntaxError("Invalid regular expression: /"+t+"/: "+e)}},{"./sets":19,"./types":20}],22:[function(t,e,r){"use strict";var n=t("ret"),s=n.types;e.exports=function(t,e){e||(e={});var r,i=void 0===e.limit?25:e.limit;r=t,"[object RegExp]"==={}.toString.call(r)?t=t.source:"string"!=typeof t&&(t=String(t));try{t=n(t)}catch(t){return!1}var o=0;return function t(e,r){var n,a;if(e.type===s.REPETITION){if(r++,o++,r>1)return!1;if(o>i)return!1}if(e.options)for(n=0,a=e.options.length;n<a;n++)if(!t({stack:e.options[n]},r))return!1;var c=e.stack||e.value&&e.value.stack;if(!c)return!0;for(n=0;n<c.length;n++)if(!t(c[n],r))return!1;return!0}(t,0)}},{ret:17}]},{},[4])(4)}));
//# sourceMappingURL=find-my-way.min.js.map
